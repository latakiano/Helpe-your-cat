<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalayan Cat Neon - 20 Stages</title>
    <style>
        header { 
            height: 70px; background: #000; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; border-bottom: 3px solid #333;
        }
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Arial Black', sans-serif; touch-action: none; }
        #ui-text { color: #fff; font-size: 18px; margin-bottom: 5px; text-shadow: 0 0 10px #00ffcc; }
        .progress-container { width: 85%; height: 12px; background: #222; border-radius: 10px; overflow: hidden; border: 2px solid #444; }
        #fill { width: 0%; height: 100%; background: linear-gradient(90deg, #ff00ff, #00ffff); box-shadow: 0 0 15px #00ffff; }
        #ov { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 1000; text-align: center; }
        button { padding: 18px 60px; font-size: 26px; cursor: pointer; background: #ff0055; color: white; border: none; border-radius: 50px; font-weight: bold; box-shadow: 0 0 20px #ff0055; transition: 0.3s; }
        button:hover { transform: scale(1.1); box-shadow: 0 0 30px #ff0055; }
    </style>
</head>
<body>

<header>
    <div id="ui-text">âœ¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø© <span id="lvlNum">1</span>: <span id="lvlName">ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨</span> | ğŸŸ <span id="sc">0</span></div>
    <div class="progress-container"><div id="fill"></div></div>
</header>

<div id="ov">
    <h1 id="msg" style="color: #00ffcc; text-shadow: 0 0 20px #00ffcc;">Ù…ØºØ§Ù…Ø±Ø© Ù‚Ø·Ø© Ø§Ù„Ù‡Ù…Ù„Ø§ÙŠØ§ Ø§Ù„Ù†ÙŠÙˆÙ† ğŸˆ</h1>
    <p style="font-size: 18px;">Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø²Ø§Ù‡ÙŠØ© ÙˆØ§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù€ 20!</p>
    <button onclick="startStage()">Ø¥Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ ğŸ®</button>
</div>

<canvas id="c"></canvas>

<script>
    const cvs = document.getElementById('c'), ctx = cvs.getContext('2d');
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function resize() { cvs.width = window.innerWidth; cvs.height = window.innerHeight - 70; }
    window.onresize = resize; resize();

    const I = {
        cat: 'https://img.icons8.com/color/96/cat--v1.png',
        wolf: 'https://img.icons8.com/color/150/wolf.png',
        ghost: 'https://img.icons8.com/color/150/ghost.png',
        eagle: 'https://img.icons8.com/color/150/eagle.png',
        snake: 'https://img.icons8.com/color/150/snake.png',
        croc: 'https://img.icons8.com/color/150/crocodile.png',
        lion: 'https://img.icons8.com/color/150/lion.png',
        dragon: 'https://img.icons8.com/color/150/dragon.png',
        bear: 'https://img.icons8.com/color/150/polar-bear.png',
        alien: 'https://img.icons8.com/color/150/alien.png',
        monster: 'https://img.icons8.com/color/150/monster-face.png',
        cabin: 'https://img.icons8.com/color/200/log-cabin.png'
    };

    const imgs = {};
    Object.keys(I).forEach(k => { imgs[k] = new Image(); imgs[k].src = I[k]; });

    // Ù…Ø±Ø§Ø­Ù„ Ø¨Ø£Ù„ÙˆØ§Ù† Ø²Ø§Ù‡ÙŠØ© (Neon)
    const stages = [
        {n:"ØºØ§Ø¨Ø© Ø§Ù„ÙÙ„ÙˆØ±Ø³Ù†Øª", m:"wolf", bg:"#001a00", obs:"#00ff00", s:6},
        {n:"Ø¨Ù†ÙØ³Ø¬ Ø§Ù„Ø£Ø´Ø¨Ø§Ø­", m:"ghost", bg:"#1a001a", obs:"#ff00ff", s:7},
        {n:"Ø£Ø²Ø±Ù‚ Ø§Ù„Ø³Ù…Ø§ÙˆØ§Øª", m:"eagle", bg:"#000033", obs:"#00ffff", s:8},
        {n:"Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ø§Ù„ÙˆØ§Ø¯ÙŠ", m:"snake", bg:"#221100", obs:"#ffcc00", s:9},
        {n:"ØªØ±ÙƒÙˆØ§Ø² Ø§Ù„Ù†Ù‡Ø±", m:"croc", bg:"#002222", obs:"#40E0D0", s:10},
        {n:"Ø°Ù‡Ø¨ Ø§Ù„Ø£Ø³Ø¯", m:"lion", bg:"#221100", obs:"#ffd700", s:11},
        {n:"Ù†Ø§Ø± Ø§Ù„ØªÙ†ÙŠÙ†", m:"dragon", bg:"#220000", obs:"#ff0000", s:12},
        {n:"Ø¬Ù„ÙŠØ¯ Ø§Ù„Ù†ÙŠÙˆÙ†", m:"bear", bg:"#001122", obs:"#ffffff", s:12.5},
        {n:"Ù„ÙŠØ²Ø± Ø§Ù„ÙØ¶Ø§Ø¡", m:"alien", bg:"#000000", obs:"#cc00ff", s:13},
        {n:"Ø§Ù„ÙˆØ­Ø´ Ø§Ù„Ù…Ø¶ÙŠØ¡", m:"monster", bg:"#110011", obs:"#ff0055", s:14},
        {n:"Ø§Ù„ÙƒÙ‡Ù Ø§Ù„Ø£Ø®Ø¶Ø±", m:"wolf", bg:"#001100", obs:"#adff2f", s:15},
        {n:"Ø·ÙŠÙ Ø§Ù„Ø´Ø¨Ø­", m:"ghost", bg:"#000011", obs:"#7fffd4", s:16},
        {n:"Ø±Ø¹Ø¯ Ø§Ù„Ø¬Ø¨Ù„", m:"eagle", bg:"#111111", obs:"#f0e68c", s:17},
        {n:"Ø³Ù… Ø§Ù„Ø£ÙØ¹Ù‰", m:"snake", bg:"#000d00", obs:"#32cd32", s:18},
        {n:"ÙŠØ§Ù‚ÙˆØª Ø§Ù„Ù…Ø§Ø¡", m:"croc", bg:"#000022", obs:"#ff4500", s:19},
        {n:"Ø´Ù…Ø³ Ø§Ù„Ø¹Ø±ÙŠÙ†", m:"lion", bg:"#220000", obs:"#ffa500", s:20},
        {n:"Ø¨Ø±ÙƒØ§Ù† Ø§Ù„ØªÙ†ÙŠÙ†", m:"dragon", bg:"#000", obs:"#ff1493", s:21},
        {n:"Ø£Ø¨ÙŠØ¶ Ø§Ù„Ø«Ù„Ø¬", m:"bear", bg:"#002", obs:"#0ff", s:22},
        {n:"Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙØ¶Ø§Ø¡", m:"alien", bg:"#000", obs:"#ff0", s:23},
        {n:"Ø§Ù„Ù…Ø¹Ø±ÙƒØ© Ø§Ù„ÙƒØ¨Ø±Ù‰", m:"monster", bg:"#300", obs:"#fff", s:25}
    ];

    let cur = 0, dist = 1000, active = false, started = false, score = 0;
    let p = { x: 100, y: 0, v: 0 }, m = { x: -150, y: 0 }, obs = [], fish = [], cabinX = -500;
    let lastObsTime = 0;

    function playTone(freq, type, dur) {
        try {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type; osc.frequency.value = freq;
            gain.gain.setValueAtTime(0.06, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + dur);
        } catch(e){}
    }

    function startStage() {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        document.getElementById('ov').style.display = 'none';
        dist = 1000; p.y = cvs.height/2; p.v = 0; m.x = -150;
        obs = []; fish = []; cabinX = -500; active = true; started = false;
        document.getElementById('lvlNum').innerText = (cur+1);
        document.getElementById('lvlName').innerText = stages[cur].n;
    }

    function die() {
        playTone(100, 'sawtooth', 0.6);
        active = false; document.getElementById('ov').style.display = 'flex';
        document.getElementById('msg').innerText = "Ø£Ù…Ø³Ùƒ Ø¨Ùƒ " + stages[cur].n + "!";
    }

    function loop() {
        let s = stages[cur];
        ctx.fillStyle = s.bg; ctx.fillRect(0, 0, cvs.width, cvs.height);

        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ø¨Ø³ÙŠØ· ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
        ctx.fillStyle = "rgba(255,255,255,0.1)";
        for(let i=0; i<20; i++) ctx.fillRect(Math.random()*cvs.width, Math.random()*cvs.height, 2, 2);

        if (active && started) {
            p.v += 0.45; p.y += p.v; dist -= s.s / 12;
            m.y += (p.y - m.y) * 0.05; m.x = Math.min(p.x - 130, m.x + 0.35);

            if (dist <= 0) {
                if(cabinX === -500) { cabinX = cvs.width; playTone(600, 'sine', 0.3); }
                cabinX -= s.s;
                if(p.x > cabinX + 60) {
                    active = false; cur++;
                    if(cur >= 20) { cur = 0; document.getElementById('msg').innerText = "ğŸ† Ø£Ø³Ø·ÙˆØ±Ø©! Ø®ØªÙ…ØªÙ ÙƒÙ„ Ø§Ù„Ù…Ø±Ø§Ø­Ù„!"; }
                    else { document.getElementById('msg').innerText = "ğŸ¡ Ø£Ø­Ø³Ù†ØªÙ! ÙˆØµÙ„ØªÙ Ù„Ù„ÙƒÙ‡Ù Ø¨Ø³Ù„Ø§Ù…"; }
                    document.getElementById('ov').style.display = 'flex';
                }
            }

            let now = Date.now();
            if (dist > 50 && now - lastObsTime > 1600) {
                let gap = 260, g = Math.random() * (cvs.height - 400) + 80;
                obs.push({ x: cvs.width, y: g, h: gap });
                fish.push({ x: cvs.width + 120, y: g + gap/2 });
                lastObsTime = now;
            }

            obs.forEach((o, i) => {
                o.x -= s.s;
                // Ø±Ø³Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø¨ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙˆÙ‡Ø¬ (Neon Glow)
                ctx.fillStyle = s.obs;
                ctx.shadowBlur = 15; ctx.shadowColor = s.obs;
                ctx.fillRect(o.x, 0, 50, o.y); 
                ctx.fillRect(o.x, o.y+o.h, 50, cvs.height);
                ctx.shadowBlur = 0; // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙˆÙ‡Ø¬ Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø®Ø±Ù‰
                
                if (p.x+35 > o.x && p.x+5 < o.x+50 && (p.y < o.y || p.y+40 > o.y+o.h)) die();
                if (o.x < -100) obs.splice(i, 1);
            });

            fish.forEach((f, i) => {
                f.x -= s.s; ctx.font = "35px Arial"; ctx.fillText("ğŸ ", f.x, f.y);
                if (Math.hypot(p.x-f.x, p.y-f.y) < 45) { 
                    score += 100; fish.splice(i, 1); 
                    playTone(1500, 'sine', 0.1); 
                }
            });

            if (p.y > cvs.height || p.y < -50 || p.x < m.x + 60) die();
            document.getElementById('fill').style.width = (1 - dist/1000)*100 + "%";
            document.getElementById('sc').innerText = score;
        }

        if(cabinX > -500 && imgs.cabin.complete) {
            ctx.drawImage(imgs.cabin, cabinX, cvs.height/2-80, 160, 160);
        }

        const eImg = imgs[s.m];
        if(eImg && eImg.complete) {
            ctx.save(); ctx.translate(m.x + 100, m.y); ctx.scale(-1, 1);
            ctx.drawImage(eImg, 0, 0, 100, 100); ctx.restore();
        }

        if(imgs.cat.complete) ctx.drawImage(imgs.cat, p.x, p.y, 60, 60);

        requestAnimationFrame(loop);
    }

    const jump = () => { if(active) { started = true; p.v = -8.5; playTone(450, 'square', 0.07); } }
    window.onmousedown = jump;
    window.ontouchstart = (e) => { if(active) { e.preventDefault(); jump(); } };
    loop();
</script>
</body>
</html>