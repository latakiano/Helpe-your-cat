<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalayan Cat Pro - 20 Stages</title>
    <style>
        /* Ø¥Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø®Ø§Ø±Ø¬ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨ */
        header { 
            height: 60px; 
            background: #1a1a1a; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            border-bottom: 2px solid #444;
        }
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; touch-action: none; }
        #ui-text { color: white; font-size: 16px; margin-bottom: 5px; font-weight: bold; }
        .progress-container { width: 80%; height: 8px; background: #333; border-radius: 10px; overflow: hidden; border: 1px solid #555; }
        #fill { width: 0%; height: 100%; background: linear-gradient(90deg, #00ffcc, #00ff00); transition: width 0.2s; }
        
        #ov { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 100; text-align: center; }
        button { padding: 15px 40px; font-size: 22px; cursor: pointer; background: #f39c12; color: white; border: none; border-radius: 50px; font-weight: bold; box-shadow: 0 4px 0 #d35400; }
        button:active { transform: translateY(2px); box-shadow: none; }
    </style>
</head>
<body>

<header>
    <div id="ui-text">ğŸ¾ Ø§Ù„Ù…Ø±Ø­Ù„Ø© <span id="lvlNum">1</span>: <span id="lvlName">ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨</span> | ğŸŸ <span id="sc">0</span></div>
    <div class="progress-container"><div id="fill"></div></div>
</header>

<div id="ov">
    <h1 id="msg">Ù…ØºØ§Ù…Ø±Ø© Ù‚Ø·Ø© Ø§Ù„Ù‡Ù…Ù„Ø§ÙŠØ§ ğŸˆ</h1>
    <p>ØªÙ… ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù‚Ø·Ø©ØŒ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©ØŒ ÙˆÙ†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø±Ø¶!</p>
    <button onclick="start()">Ø§Ù†Ø·Ù„Ù‚ÙŠ Ø§Ù„Ø¢Ù† ğŸš€</button>
</div>

<canvas id="c"></canvas>

<script>
    const cvs = document.getElementById('c'), ctx = cvs.getContext('2d');
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function resize() { 
        cvs.width = window.innerWidth; 
        cvs.height = window.innerHeight - 60; // Ø®ØµÙ… Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù‡ÙŠØ¯Ø±
    }
    window.onresize = resize; resize();

    const stages = [
        {n:"ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨", m:"ğŸº", bg:"#1e392a", obs:"#ffeb3b", s:6},
        {n:"Ù…Ù‚Ø¨Ø±Ø© Ø§Ù„Ø£Ø´Ø¨Ø§Ø­", m:"ğŸ‘»", bg:"#2c003e", obs:"#00e5ff", s:7},
        {n:"Ø¬Ø¨Ø§Ù„ Ø§Ù„Ù†Ø³ÙˆØ±", m:"ğŸ¦…", bg:"#003366", obs:"#ff4081", s:8},
        {n:"ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø£ÙØ§Ø¹ÙŠ", m:"ğŸ", bg:"#3d2b1f", obs:"#76ff03", s:9},
        {n:"Ù†Ù‡Ø± Ø§Ù„ØªÙ…Ø§Ø³ÙŠØ­", m:"ğŸŠ", bg:"#004d40", obs:"#ff9100", s:10},
        {n:"Ø¹Ø±ÙŠÙ† Ø§Ù„Ø£Ø³Ø¯", m:"ğŸ¦", bg:"#4e342e", obs:"#ffff00", s:10.5},
        {n:"ÙƒÙ‡Ù Ø§Ù„ØªÙ†ÙŠÙ†", m:"ğŸ‰", bg:"#3e0000", obs:"#00ffcc", s:11},
        {n:"Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¬Ù„ÙŠØ¯", m:"ğŸ»", bg:"#b3e5fc", obs:"#303f9f", s:11.5},
        {n:"Ø§Ù„ÙØ¶Ø§Ø¡", m:"ğŸ‘½", bg:"#0d47a1", obs:"#eeff41", s:12},
        {n:"Ø¨Ø±Ø¬ Ø§Ù„Ø®ÙØ§ÙÙŠØ´", m:"ğŸ¦‡", bg:"#212121", obs:"#f44336", s:12.5},
        {n:"ØºØ§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ±", m:"ğŸ¯", bg:"#5d4037", obs:"#00e676", s:13},
        {n:"Ø¬Ø²ÙŠØ±Ø© Ø§Ù„ØºÙˆØ±ÙŠÙ„Ø§", m:"ğŸ¦", bg:"#1b5e20", obs:"#ffea00", s:13.5},
        {n:"Ù‚Ù„Ø¹Ø© Ø§Ù„Ø¹Ø¸Ø§Ù…", m:"ğŸ’€", bg:"#424242", obs:"#18ffff", s:14},
        {n:"Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ù‚Ø±Ø´", m:"ğŸ¦ˆ", bg:"#01579b", obs:"#ff1744", s:14.5},
        {n:"Ø¹Ø´ Ø§Ù„Ø¹Ù†Ø§ÙƒØ¨", m:"ğŸ•·ï¸", bg:"#263238", obs:"#d4e157", s:15},
        {n:"Ù…Ø³ØªÙ†Ù‚Ø¹ Ø§Ù„ÙˆØ­ÙˆØ´", m:"ğŸ§Ÿ", bg:"#33691e", obs:"#ff3d00", s:15.5},
        {n:"Ø§Ù„ØµØ­Ø±Ø§Ø¡", m:"ğŸª", bg:"#ffcc80", obs:"#512da8", s:16},
        {n:"ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø³Ø­Ø±", m:"ğŸ§™", bg:"#4a148c", obs:"#1de9b6", s:16.5},
        {n:"Ø§Ù„Ù…ØµÙ†Ø¹", m:"ğŸ¤–", bg:"#37474f", obs:"#ff00ff", s:17},
        {n:"Ø§Ù„Ù…ÙˆØ§Ø¬Ù‡Ø©", m:"ğŸ‘¹", bg:"#b71c1c", obs:"#ffffff", s:18}
    ];

    let cur = 0, score = 0, dist = 1000, active = false, started = false;
    let p = {x: 100, y: 0, v: 0}, m = {x: -120, y: 0}, obs = [], fish = [];
    let lastObsTime = 0;

    function playTone(freq, type, dur) {
        try {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type; osc.frequency.value = freq;
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + dur);
        } catch(e){}
    }

    function start() {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        document.getElementById('ov').style.display = 'none';
        dist = 1000; p.y = cvs.height/2; p.v = 0; m.x = -120;
        obs = []; fish = []; active = true; started = false;
        document.getElementById('lvlNum').innerText = (cur+1);
        document.getElementById('lvlName').innerText = stages[cur].n;
    }

    function die() {
        playTone(150, 'sawtooth', 0.4);
        active = false; document.getElementById('ov').style.display = 'flex';
        document.getElementById('msg').innerText = "Ø£Ù…Ø³Ùƒ Ø¨Ùƒ " + stages[cur].m;
    }

    function loop() {
        let s = stages[cur];
        ctx.fillStyle = s.bg; ctx.fillRect(0, 0, cvs.width, cvs.height);

        if (active && started) {
            p.v += 0.5; p.y += p.v; dist -= s.s / 15;
            m.y += (p.y - m.y) * 0.05; m.x = Math.min(p.x - 120, m.x + 0.3);

            if (dist <= 0) {
                cur++; active = false; playTone(800, 'sine', 0.3);
                document.getElementById('ov').style.display = 'flex';
                document.getElementById('msg').innerText = "Ø±Ø§Ø¦Ø¹! Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©";
            }

            let now = Date.now();
            if (now - lastObsTime > 1600) {
                let gap = 260, g = Math.random() * (cvs.height - 400) + 80;
                obs.push({x: cvs.width, y: g, h: gap});
                fish.push({x: cvs.width + 120, y: g + gap/2});
                lastObsTime = now;
            }

            obs.forEach((o, i) => {
                o.x -= s.s;
                // Ø±Ø³Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø¨Ø£Ù„ÙˆØ§Ù† Ø²Ø§Ù‡ÙŠØ© ÙˆÙ…ØªÙ…ÙŠØ²Ø©
                ctx.fillStyle = s.obs;
                ctx.shadowBlur = 10; ctx.shadowColor = s.obs;
                ctx.fillRect(o.x, 0, 45, o.y); 
                ctx.fillRect(o.x, o.y+o.h, 45, cvs.height);
                ctx.shadowBlur = 0;
                if (p.x+35 > o.x && p.x < o.x+45 && (p.y < o.y || p.y+40 > o.y+o.h)) die();
                if (o.x < -100) obs.splice(i, 1);
            });

            fish.forEach((f, i) => {
                f.x -= s.s;
                ctx.font = "35px Arial"; ctx.fillText("ğŸ ", f.x, f.y);
                if (Math.hypot(p.x-f.x, p.y-f.y) < 45) { 
                    score += 100; fish.splice(i, 1); playTone(1200, 'sine', 0.1);
                }
            });

            if (p.y > cvs.height || p.y < -50 || p.x < m.x + 60) die();
            document.getElementById('fill').style.width = (1 - dist/1000)*100 + "%";
            document.getElementById('sc').innerText = score;
        }

        // Ø±Ø³Ù… Ø§Ù„ÙˆØ­ÙˆØ´ Ø¨Ø§ØªØ¬Ø§Ù‡ ØµØ­ÙŠØ­
        ctx.font = "60px Arial";
        ctx.save(); ctx.translate(m.x+30, m.y+50);
        ctx.scale(-1, 1); ctx.fillText(s.m, 0, 0);
        ctx.restore();

        // Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø© Ø§Ù„Ù‡Ù…Ù„Ø§ÙŠØ§ Ø¨Ø£Ø±Ø¨Ø¹Ø© Ø£Ù‚Ø¯Ø§Ù… (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ù‚Ø·Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©)
        ctx.font = "55px Arial";
        ctx.fillText("ğŸˆ", p.x, p.y+40);

        requestAnimationFrame(loop);
    }

    const jump = () => { if(active) { started = true; p.v = -8.5; playTone(400, 'square', 0.05); } }
    window.onmousedown = jump;
    window.ontouchstart = (e) => { e.preventDefault(); jump(); };
    loop();
</script>
</body>
</html>